CREATE  database CRMS;
USE CRMS;
CREATE TABLE CATEGORY (
CNAME VARCHAR(20),
NO_OF_PERSONS INT NOT NULL,
CATEGORY_ID INT NOT NULL,
LCAPACITY INT NOT NULL,
COST_PER_DAY FLOAT NOT NULL,
PRIMARY KEY(CATEGORY_ID)
);
CREATE TABLE CAR(
MODEL_YEAR INT NOT NULL,
MODEL VARCHAR(20) NOT NULL,
LAST_SERVICE_DATE DATE NOT NULL,
MILEAGE INT NOT NULL,
CATEGORY_ID  INT,
FOREIGN KEY(CATEGORY_ID) REFERENCES CATEGORY(CATEGORY_ID),
REGISTRATION_NUMBER VARCHAR(20),
PRIMARY KEY (REGISTRATION_NUMBER) 
);

CREATE TABLE CUSTOMER (
PNAME VARCHAR (20) NOT NULL,
DRIVING_LICENSE_NUMBER VARCHAR (20) NOT NULL,
EMAIL_ID VARCHAR (20) NOT NULL,
ADDRESS VARCHAR (40) NOT NULL,
PHONE_NUMBER NUMERIC  NOT NULL,
REGISTRATION_NUMBER VARCHAR (20),
FOREIGN KEY (REGISTRATION_NUMBER) REFERENCES CAR(REGISTRATION_NUMBER),
MEMBERSHIP_ID INT,
PRIMARY KEY (MEMBERSHIP_ID)
);

CREATE TABLE LOCATION (
LNAME VARCHAR (20) NOT NULL,
LOCATION_ID INT,
LADDRESS VARCHAR (40) NOT NULL,
PRIMARY KEY( LOCATION_ID) 
);

CREATE TABLE INSURANCE (
INAME VARCHAR(20) NOT NULL,
COVERAGE_TYPE VARCHAR (20) NOT NULL,
INSURANCE_EXPIRY DATE NOT NULL,
INSURANCE_ID INT,
PRIMARY KEY (INSURANCE_ID)
);

CREATE TABLE BOOKING(
RETURN_DATE DATE NOT NULL,
AMOUNT FLOAT NOT NULL,
BOOKING_DATE DATE NOT NULL,
ACTUAL_RETURN_DATE DATE NOT NULL,
MEMBERSHIP_ID INT,
FOREIGN KEY (MEMBERSHIP_ID) REFERENCES CUSTOMER(MEMBERSHIP_ID),
LOCATION_ID INT ,
FOREIGN KEY (LOCATION_ID) REFERENCES LOCATION(LOCATION_ID),
INSURANCE_ID INT,
FOREIGN KEY (INSURANCE_ID) REFERENCES INSURANCE(INSURANCE_ID),
BOOKING_ID INT,
PRIMARY KEY (BOOKING_ID),
REGISTRATION_NUMBER VARCHAR(20),
FOREIGN KEY (REGISTRATION_NUMBER) REFERENCES CAR(REGISTRATION_NUMBER)
);


CREATE TABLE BILL(
BILL_ID INT,
TOTAL_AMOUNT FLOAT NOT NULL,
TAX_AMOUNT FLOAT NOT NULL,
BILL_DATE DATE NOT NULL,
BOOKING_ID INT,
PRIMARY KEY (BILL_ID),
FOREIGN KEY (BOOKING_ID) REFERENCES BOOKING(BOOKING_ID)
);
SELECT * FROM CATEGORY;
SELECT * FROM CAR;
SELECT * FROM CUSTOMER;
SELECT * FROM LOCATION;

INSERT INTO CATEGORY VALUES('HATCHBACK',4,1,230,850);
INSERT INTO CATEGORY VALUES('SEDAN',5,2,400,1050);
INSERT INTO CATEGORY VALUES('SUV',7,3,500,1500);
INSERT INTO CATEGORY VALUES('LUXURY',5,4,450,2000);

INSERT INTO CAR VALUES(2015,'I20',STR_TO_DATE('10-01-2020', '%d-%m-%Y'),50000,1,'KA-02-SK-7600');
INSERT INTO CAR VALUES(2016,'POLO',STR_TO_DATE('10-03-2020', '%d-%m-%Y'),40000,1,'KA-02-SR-8055');
INSERT INTO CAR VALUES(2014,'HONDA CITY',STR_TO_DATE('24-12-2019', '%d-%m-%Y'),60000,2,'KA-03-MP-1234');
INSERT INTO CAR VALUES(2017,'COROLLA',STR_TO_DATE('15-10-2019', '%d-%m-%Y'),30000,2,'KA-04-MH-7860');
INSERT INTO CAR VALUES(2018,'BREZZA',STR_TO_DATE('03-02-2020', '%d-%m-%Y'),20000,3,'KA-02-MH-4722');
INSERT INTO CAR VALUES(2017,'INNOVA',STR_TO_DATE('07-05-2020', '%d-%m-%Y'),35000,3,'KA-05-CN-3210');
INSERT INTO CAR VALUES(2019,'AUDI A4',STR_TO_DATE('15-12-2020', '%d-%m-%Y'),10000,4,'KA-01-LX-007');

INSERT INTO CUSTOMER VALUES('RAJKUMAR','KA02 1234','rajkumar@abc.com','RAJAJINAGAR','6362319011','KA-01-LX-007',1001);
INSERT INTO CUSTOMER VALUES('ROHAN','KA02 4321','rohan@abc.com','BASAVESHWARNAGAR','7349726140','KA-02-SK-7600',1002);
INSERT INTO CUSTOMER VALUES('TUSHARA','KA01 4567','tushara@abc.com','CHANDRA LAYOUT','9844655540','KA-03-MP-1234',1003);
INSERT INTO CUSTOMER VALUES('SPANDANA','KA03 0678','spandana@abc.com','HEBBAL','8904575820','KA-04-MH-7860',1004);
INSERT INTO CUSTOMER VALUES('SRIVATSA','KA04 9867','srivatsa@xyz.com','INDIRANAGAR','8296414286 ','KA-05-CN-3210',1005);
INSERT INTO CUSTOMER VALUES('RAHUL','KA41 4532','rahul@xyz.com','KENGERI','9663131168','KA-02-MH-4722',1006);

INSERT INTO LOCATION VALUES ('CRMS-NAGARBHAVI',101,'NAGARBHAVI');
INSERT INTO LOCATION VALUES ('CRMS-RAJAJINAGAR',102,'RAJAJINAGAR');
INSERT INTO LOCATION VALUES ('CRMS-WHITEFIELD',103,'WHITEFIELD');
INSERT INTO LOCATION VALUES ('CRMS-MAJESTIC',104,'MAJESTIC');
